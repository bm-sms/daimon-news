!!!
%html
  = render 'application/head'

  %body(data-layer='top'){ class: "#{['root-container', @class_page_name, @class_category_id].compact.join(' ')}" }
    %div.overlay
    = google_tag_manager(current_site.gtm_id)
    = render 'application/content_header'

    = content_for(:notification)

    .content-body
      %nav.sidebar.sidebar--left(data-state='off-canvas')
        %div.menu
          - if current_site.menu_url.present?
            .external-component{data: {external_src: current_site.menu_url}}
          %p.menu__item.menu__item--home.menu__section{data: {menu_item_state: current_category.nil? ? 'current' : nil}}
            = link_to 'Home', root_url, class: 'menu__label'
          %ul.menu__items--first
            - current_site.categories.ordered.each_with_index do |category, index|
              -if index < 7
                %li.menu__item{class: "menu__item--#{category.slug}", data: {menu_item_state: category == current_category ? 'current' : nil}}
                  = link_to category.name, category_url(category.slug), class: 'menu__label'

          - if current_site.categories.length > 7
            %p.menu__item
              = link_to '#', class: 'menu__more' do
                More
                %span.arrow.down
            %ul.menu__items--second
              - current_site.categories.ordered.each_with_index do |category, index|
                -if index > 6
                  %li.menu__item{class: "menu__item--#{category.slug}", data: {menu_item_state: category == current_category ? 'current' : nil}}
                    = link_to category.name, category_url(category.slug), class: 'menu__label'

      - if @class_page_name == "welcome" && current_site.tagline.present?
        %div.welcome-content-wrapper
          %div.tagline-wrapper
            %p.tagline= current_site.tagline

      .wrappable
        = render 'application/breadcrumbs'
        .wrappable__content.wrappable__content--flex.main-pane
          %main
            = content_for?(:content) ? yield(:content) : yield
        %aside.wrappable__content.promotions
          %section.promotion{ style: 'margin-top: 20px;'}
            - if current_site.ad_client.present? && current_site.ad_slot.present?
              %section.promotion
                = render 'application/adsense', ad_client: current_site.ad_client, ad_slot: current_site.ad_slot
            - elsif current_site.promotion_tag.present?
              %section.promotion
                = raw current_site.promotion_tag

          %section.promotion
            %div.recent-posts
              %h2.subheading.subheading--aside.subheading--press-articles 新着記事
              %ul
                - current_site.posts.published.order_by_recently.limit(5).each do |post|
                  = render partial: 'posts/summary', locals: {post: post}

            %div.category-list
              %h2.subheading.subheading--aside カテゴリ
              %ul
                - current_site.categories.ordered.each do |category|
                  %li.category-list__item
                    = link_to category.name, category_url(category.slug)
          - if current_site.promotion_url.present?
            .external-component{data: {external_src: current_site.promotion_url}}

    = render 'application/footer'
