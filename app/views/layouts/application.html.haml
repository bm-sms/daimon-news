!!!
%html
  = render 'application/head'

  %body(data-layer='top'){ class: "#{['root-container', @class_page_name, @class_category_id].compact.join(' ')}" }
    = google_tag_manager(current_site.gtm_id)
    = render 'application/content_header'

    = content_for(:notification)

    .content-body
      %nav.sidebar.sidebar--left(data-state='off-canvas')
        %ul.menu
          - if current_site.menu_url.present?
            .external-component{data: {external_src: current_site.menu_url}}
          %li.menu__item.menu__item--press.menu__section{data: {menu_item_state: current_category.nil? ? 'current' : nil}}
            = link_to 'Press', root_url, class: 'menu__label'

            - categories1, categories2 = current_site.categories.ordered.partition.with_index {|_, i| i < 7 }
            %ul.menu__items.menu__items.menu__items--first
              - categories1.each do |category|
                %li.menu__item{class: "menu__item--#{category.slug}", data: {menu_item_state: category == current_category ? 'current' : nil}}
                  = link_to category.name, category_url(category.slug), class: 'menu__label'
              - if categories2.present?
                %li.menu__item
                  = link_to '#', class: 'menu__more' do
                    More
                    %span.arrow.down
            - if categories2.present?
              %ul.menu__items.menu__items.menu__items--second
                - categories2.each do |category|
                  %li.menu__item{class: "menu__item--#{category.slug}", data: {menu_item_state: category == current_category ? 'current' : nil}}
                    = link_to category.name, category_url(category.slug), class: 'menu__label'

      .wrappable
        .wrappable__content.wrappable__content--flex.main-pane
          %main
            = render 'application/breadcrumbs'
            = content_for?(:content) ? yield(:content) : yield
        %aside.wrappable__content.promotions
          - if current_site.ad_client.present? && current_site.ad_slot.present?
            %section.promotion
              = render 'application/adsense', ad_client: current_site.ad_client, ad_slot: current_site.ad_slot
          - elsif current_site.promotion_tag.present?
            %section.promotion
              = raw current_site.promotion_tag
          %section.promotion
            %h2.subheading.subheading--aside.subheading--press-articles 記事検索
            = render 'search/form'

            %h2.subheading.subheading--aside.subheading--press-articles 新着記事
            %ul
              - current_site.posts.published.order_by_recently.limit(5).each do |post|
                = render partial: 'posts/summary_with_content', locals: {post: post}
            %h2.subheading.subheading--aside カテゴリ
            %ul.category-list
              - current_site.categories.ordered.each do |category|
                %li.category-list__item
                  = link_to category.name, category_url(category.slug)
          - if current_site.promotion_url.present?
            .external-component{data: {external_src: current_site.promotion_url}}

    = render 'application/footer'
