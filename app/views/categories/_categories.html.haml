- category_type = depth <= 1 ? "category" : "sub-category"

%ul{class: depth <= 1 ? "#{category_type}-summary" : "#{category_type}-summary"}
  - categories.select {|category| category.post_count > 0 }.each do |category|
    %li.category-summary__item
      = link_to "#{category.name} (#{category.post_count})", category_url(category.slug), class: "#{category_type}-summary__title"
      - if depth < 2
        - if category.has_children?
          = render "categories", categories: category.children, depth: depth + 1
        - else
          %ul.posts-title
            - category.posts.published.order_by_recent.limit(7).each do |post|
              %li.posts-title__item
                = link_to post.title, post_url(post.public_id)
